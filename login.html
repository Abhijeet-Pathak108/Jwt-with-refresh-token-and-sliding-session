<!DOCTYPE html>
<html>
<head><title>Login</title></head>
<body>

<h2>Login</h2>

<input id="username" placeholder="username">
<input id="password" type="password" placeholder="password">
<button onclick="login()">Login</button>

<p id="msg"></p>

<script src="auth.js"></script>
<script>
function login() {
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;


    fetch(`${API_BASE}/auth/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password }),
        credentials: "include" 
    })
    .then(r => {
        if (!r.ok) throw new Error("invalid login");
        return r.json();
    })
    .then(data => {
        saveAccessToken(data.accessToken);
        window.location.href = "dashboard.html";
    })
    .catch(() => msg.innerText = "Login failed");
}
</script>

</body>
</html>
