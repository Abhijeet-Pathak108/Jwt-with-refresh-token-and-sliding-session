<button id="payBtn">Pay Now</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
document.getElementById("payBtn").onclick = async function () {

  // 1. Call backend to create order
  const res = await fetch("/create-order", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ amount: 1 })  // â‚¹100
  });

  const order = await res.json();

  // 2. Initialize Razorpay Checkout
  const options = {
    key: "rzp_test_S41OxbRp67UfaE",
    amount: order.amount,
    currency: "INR",
    name: "My Project",
    description: "Test Transaction",
    order_id: order.id,
    handler: async function (response){
    	
    	const verifyRes = await fetch("/verify", {
    	      method: "POST",
    	      headers: {
    	         "Content-Type": "application/json"
    	      },
    	      body: JSON.stringify({
    	         payment_id: response.razorpay_payment_id,
    	         order_id: response.razorpay_order_id,
    	         signature: response.razorpay_signature
    	      })
    	   });
    	
       alert("Payment Successful");
       console.log(response);
       // send to backend for verification
    },
    theme: {
      color: "#3399cc"
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();
};
</script>
